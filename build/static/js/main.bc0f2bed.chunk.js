(this["webpackJsonpcanvas-drawing"]=this["webpackJsonpcanvas-drawing"]||[]).push([[0],{20:function(e,t,n){e.exports=n(45)},25:function(e,t,n){},26:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(18),i=n.n(c),o=(n(25),n(26),n(6)),u=n(2),l=n(3),s=n.n(l),f=n(7),p=n(8),m=n.n(p),d="http://localhost:8080/api",v={GET_FILES:"".concat(d,"/files"),GET_FILE_BY_NAME:function(e){return"".concat(d,"/files/").concat(e)},SAVE_FILE:"".concat(d,"/files")},g={getFiles:function(){var e=Object(f.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get(v.GET_FILES);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getFileByName:function(){var e=Object(f.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get(v.GET_FILE_BY_NAME(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),saveFile:function(){var e=Object(f.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.post(v.SAVE_FILE,{name:t,data:n});case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},h=function(e){var t=e.onSave,n=e.selectedFile,a=e.onChange;return r.a.createElement("div",{style:{margin:"50px",textAlign:"center"}},r.a.createElement("div",null,r.a.createElement("input",{style:{fontSize:"20px"},type:"text",value:n,onChange:function(e){var t=e.target;a(t.value)},pattern:"[a-zA-Z0-9]*"})),r.a.createElement("div",{style:{marginTop:"30px"}},r.a.createElement("button",{onClick:t,style:{fontSize:"20px"}},"Save File")))},E=function(e){var t=e.onLoad,n=e.files,c=Object(a.useState)(""),i=Object(u.a)(c,2),o=i[0],l=i[1],s=function(e){var t=e.target;l(t.innerText)};return r.a.createElement("div",{style:{margin:"50px",textAlign:"center"}},r.a.createElement("ol",{style:{textAlign:"left"}},n.map((function(e){return r.a.createElement("li",{key:e,value:e,style:e===o?{fontWeight:"bold",fontSize:"20px",marginTop:"10px",cursor:"pointer"}:{fontSize:"20px",marginTop:"10px",cursor:"pointer"},onClick:s},e)}))),r.a.createElement("button",{style:{fontSize:"20px"},disabled:""===o,onClick:function(){t(o)}},"Load File"))},b=n(19),x=function(e){var t=e.data,n=e.setData,c=Object(a.useState)(""),i=Object(u.a)(c,2),l=i[0],s=i[1],f=Object(a.useState)([]),p=Object(u.a)(f,2),m=p[0],d=p[1];Object(a.useEffect)((function(){g.getFiles().then((function(e){var t=e.data.map((function(e){return e.split(".")[0]}));d(t)}))}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(b.a,{style:{cursor:"pointer",height:"50px",width:"50px",margin:"50px"},onClick:function(){t.length<1||n(Object(o.a)(t.splice(0,t.length-1)))}})),r.a.createElement(h,{onSave:function(){g.saveFile(l,t).then((function(){g.getFiles().then((function(e){var t=e.data.map((function(e){return e.split(".")[0]}));d(t)}))}))},selectedFile:l,onChange:s}),r.a.createElement(E,{files:m,onLoad:function(e){g.getFileByName(e).then((function(e){var t=e.data;n(t.data)})),s(e)}}))},y=function(e,t,n){return{mouseX:t-e.x,mouseY:n-e.y}},j=function(e){return 0===e},O=function(){var e=Object(a.useRef)(null),t=Object(a.useState)(),n=Object(u.a)(t,2),c=n[0],i=n[1],l=Object(a.useState)({x:0,Y:0}),s=Object(u.a)(l,2),f=s[0],p=s[1],m=Object(a.useState)(!1),d=Object(u.a)(m,2),v=d[0],g=d[1],h=Object(a.useState)([]),E=Object(u.a)(h,2),b=E[0],O=E[1],w=Object(a.useCallback)((function(){if(c){var e=c.getContext("2d");e.clearRect(0,0,c.width,c.height),function(e,t){t.forEach((function(t){var n=t.startX,a=t.startY,r=t.width,c=t.height;e.strokeRect(n,a,r,c)}))}(e,b)}}),[c,b]),S=function(e){if(v){var t=y(c.getBoundingClientRect(),e.clientX,e.clientY),n=t.mouseX,a=t.mouseY;if(j(e.button)){var r=n-f.x,i=a-f.y,u={startX:f.x,startY:f.y,width:r,height:i};O([].concat(Object(o.a)(b),[u])),g(!1)}}};return Object(a.useEffect)((function(){w()}),[w]),Object(a.useEffect)((function(){(i(e.current),c)&&(c.getContext("2d").fillStyle="green")}),[c]),r.a.createElement("div",null,r.a.createElement("div",{style:{display:"inline-block"}},r.a.createElement("canvas",{ref:e,onMouseDown:function(e){var t=y(c.getBoundingClientRect(),e.clientX,e.clientY),n=t.mouseX,a=t.mouseY;j(e.button)&&(p({x:n,y:a}),g(!0))},onMouseMove:function(e){if(c){var t=c.getContext("2d");if(v&&j(e.button)){w();var n=y(c.getBoundingClientRect(),e.clientX,e.clientY),a=n.mouseX,r=n.mouseY,i=a-f.x,o=r-f.y;t.strokeRect(f.x,f.y,i,o)}}},onMouseUp:S,onMouseLeave:S,style:{border:"1px solid red"},height:"800",width:"800"})),r.a.createElement("div",{style:{display:"inline-block"}},r.a.createElement(x,{data:b,setData:O})))};var w=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(O,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[20,1,2]]]);
//# sourceMappingURL=main.bc0f2bed.chunk.js.map